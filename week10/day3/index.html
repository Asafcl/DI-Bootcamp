<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>

// function getUsername() {
//   return new Promise((resolve, reject) => {
//     resolve("John")
//   });
// }

// async function case1() {
//   let x = await getUsername();
//   console.log(x)
// }

// case1();



// async function case2() {
//   try {
//     let z = await Promise.reject(20);
//   } 
//   catch(e) {
//     console.error("in the catch", e); 
//   }
// }

// case2();

// dos funciones iguales pero mas async

// async function foo() {
//    return "Hey"
// }

// foo()

// function foo() {
//    return Promise.resolve("Hey")
// }

// foo()
// -----------------------mejor esta el async que este segundo, es mas limpio el codigo y hace lomismo




// 2 funciones, uno mas elegante que el otro

// async function foo() {
//    await 1
// }

// function foo() {
//    return Promise.resolve(1).then(() => undefined)
// }


// --------------------


// async function fetchDataWithErrorHandLing(url){
//     try{
//         const response = await fetch(url)
//         const data = await response.json()
//         return data
//     }catch (error){
//         console.log(error)
//     }
// }

// fetchDataWithErrorHandLing('https:/jsonplaceholder.typicode.com/todos/1').then((data)=> console.log(data))

// exercise

// const clickhandler = async ()=>{
//     try{
//         const res = await fetch('http://reqres.in/api/users')
//         const data = await res.json()
    
//     if(!res.ok){
//         console.log('problem')
//         return 
//     }
//     console.log(data)
// }catch(error){
//     console.log(error)
// }
// }
// clickhandler()

// exercise

// function getRandomNumber() {
//   return new Promise(resolve => {
//     setTimeout(() => {
//       const randomNum = Math.floor(Math.random() * 10) + 1;
//       resolve(randomNum);
//     }, 1000);
//   });
// }

// getRandomNumber()
//   .then(num => console.log(`Random number is ${num}`))
//   .catch(err => console.error(err));

// // es igual al anterior pero con async


// function delay(ms) {
//   return new Promise(resolve => {
//     setTimeout(resolve, ms);
//   });
// }

// async function getRandomNumber() {
//   await delay(1000);
//   const randomNum = Math.floor(Math.random() * 10) + 1;
//   return randomNum;
// }

// (async function() {
//   try {
//     const num = await getRandomNumber();
//     console.log(`Random number is ${num}`);
//   } catch (err) {
//     console.error(err);
//   }
// })();

// exercise

// const fetchSunRise = async (endpoint) =>{
//     const response = await fetch(endpoint)
//     console.log('response',response)
//     let data = await response.json()
//     // console.log(data,'data')
//     let sunrise = data.data.sunrise
//     // console.log(`the our of the sunrise in tel aviv is: ${sunrise}`)
// }
// fetchSunRise("https://api.sunrise-sunset.org/json?lat=32.0853&lng=34.7818");

// --------------otra version q la de arriba

// const fetchSunRise = async (endpoint) => {
//     try {
//         const response = await fetch(endpoint);
//         if (response.status == 400) {
//             throw new Error("Something went wrong")
//         } else {
//             console.log("response", response)
//             hey; // undefined variable
//             let data = await response.json();
//             console.log("data", data);
//             let sunrise = data.results.sunrise;
//             console.log(`The hour of the sunrise in Tel Aviv is: ${sunrise}`)
//         }
//     } catch (err) {
//         console.log("In the catch ", err)
//     }
// }

// fetchSunRise("https://api.sunrise-sunset.org/json?lat=0.0853&lng=0.7818")
</script>


<!-- <div id="demo">
</div>

<script>
// exercise

    //USING ASYNC AWAIT WITH THE FETCH API (RETRIEVE JSON) USING INTERNAL DATA FOLDER (DATA USERS.JSON)

    async function loadUsers() {
        // const response = await fetch("data/users.json");
        // const users = await response.json();
        // return users;
        // OR
        return (await fetch("./data/users.json")).json();
}

    document.addEventListener("DOMContentLoaded", async () => {
            var demo = document.getElementById('demo')
            var users = []
        try {
            users = await loadUsers();
            
        } catch (e) {
            console.log("Error!");
            console.log(e);
        }

        console.log(users);
        return(users)
    });
    users.forEach(users => {
    
    }); -->





    <!-- exercise using externa data by asaf-->

    <!-- USING EXTERNAL DATA USING TRADITIONAL .THEN FORMAT-->

<!--<h1>Users:</h1>
<ul></ul>

 <script>
    fetch("https://jsonplaceholder.typicode.com/users")
    .then(res => {
        return res.json();
    }).then(data => {
        data.forEach(user => {
            const markup = `<li>${user.name}</li>`;

            document.querySelector("ul").insertAdjacentHTML("beforeend", markup);
        })
    }) .catch(error => console.log(error));
</script>


<!-- USING EXTERNAL DATA WITH ASYNC AWAIT INSTEAD OF .THEN  -->

<script>
    async function fetchData() {
      try {
        const res = await fetch("https://jsonplaceholder.typicode.com/users");
        const data = await res.json();
        
        data.forEach(user => {
          const markup = `<li>${user.name}</li>`;
          document.querySelector("ul").insertAdjacentHTML("beforeend", markup);
        });
        
      } catch (error) {
        console.log(error);
      }
    }
    
    fetchData();
  </script> -->


</script>
</body>
</html>